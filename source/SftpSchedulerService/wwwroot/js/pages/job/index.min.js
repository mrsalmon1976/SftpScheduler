createApp({data(){return{filter:"",filteredJobs:[],jobs:[],isLoading:!0,selectedJob:new JobModel,JOBTYPE_DOWNLOAD:JobTypes.Download,JOBTYPE_UPLOAD:JobTypes.Upload}},watch:{filter:UiHelpers.debounce(function(){this.updateFilter()},100)},methods:{async deleteJob(n){var t=this;if(this.isLoading=!0,this.selectedJob!=null&&n.length>0){let i=await axios.delete("/api/jobs/"+n).then(()=>{t.loadJobs(),UiHelpers.showSuccessToast("Delete Job","","Job successfully deleted")}).catch(n=>{UiHelpers.showErrorToast("Error","",n.message),t.isLoading=!1}).then(()=>{$("#modal-delete-job").modal("toggle")})}},async executeJob(n){await axios.post("/api/jobs/"+n.hashId+"/run",n).then(()=>{UiHelpers.showSuccessToast("Run Job","","Job "+n.name+" has been scheduled for execution")}).catch(n=>{n.response&&n.response.status==400?UiHelpers.showWarningToast("Error","",n.response.data):UiHelpers.showErrorToast("Error","",n.message)})},formatDateTime(n){return UiHelpers.formatDateTime(n)},async loadJobs(){var n=this;this.isLoading=!0;let t=await axios.get("/api/jobs").catch(t=>{UiHelpers.showErrorToast("Error","",t.message),n.isLoading=!1});this.jobs=t.data;this.updateFilter();this.isLoading=!1},showDeleteDialog(n){this.selectedJob=n;$("#modal-delete-job").modal()},async toggleJob(n,t){var i=this;n.isEnabled=t;this.isLoading=!0;await axios.post("/api/jobs/"+n.hashId,n).then(()=>{i.loadJobs();var r="'"+n.name+"' successfully "+(t?"enabled":"disabled");t?UiHelpers.showSuccessToast("Toggle Job","",r):UiHelpers.showWarningToast("Toggle Job","",r)}).catch(n=>{UiHelpers.showErrorToast("Error","",n.message),i.isLoading=!1})},updateFilter(){if(this.filter.length==0)this.filteredJobs=this.jobs;else{var n=this;this.filteredJobs=this.jobs.filter(t=>t.name.toLowerCase().includes(n.filter))}}},mounted:function(){this.isLoading=!1;UiHelpers.setPageHeader("Jobs");this.loadJobs()}}).mount("#app-job");