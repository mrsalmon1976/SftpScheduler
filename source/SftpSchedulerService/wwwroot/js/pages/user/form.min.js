createApp({data(){return{isLoading:!0,isEdit:!1,userId:"",user:new UserModel,submitButtonText:"Create User"}},methods:{async loadUser(){let t=await axios.get("/api/users/"+this.user.id).catch(n=>{this.isLoading=!1;UiHelpers.showErrorToast("Error","",n.message);return});var n=t.data;UiHelpers.setPageHeader("Edit User / "+n.userName);this.user.userName=n.userName;this.user.email=n.email;this.user.password="";this.user.role=n.role;this.user.isEnabled=n.isEnabled;this.user.validate();this.isLoading=!1},async submit(){if(this.isLoading=!0,$("#toastsContainerTopRight > .toast").remove(),!this.user.validate()){this.isLoading=!1;UiHelpers.showErrorToast("Validation Failure","","User properties missing or incorrect.",1e4);return}var n=this.isEdit?"/api/users/"+this.user.id:"/api/users";axios.post(n,this.user).then(()=>{window.location.href="/users"}).catch(n=>{var i,t;if(n.response&&n.response.data&&n.response.data.errorMessages)for(i=n.response.data.errorMessages,t=0;t<i.length;t++)UiHelpers.showErrorToast("Validation Error","",i[t]);else UiHelpers.showErrorToast("Validation Error","",n.message);this.isLoading=!1})}},mounted:function(){this.user.id=this.$el.parentElement.getAttribute("data-user-id");this.user.id!=""?(this.isEdit=!0,this.submitButtonText="Update User",this.loadUser()):(this.isLoading=!1,UiHelpers.setPageHeader("Create New User"))}}).mount("#app-user");