const{createApp}=Vue;createApp({data(){return{isLoading:!0,isEdit:!1,hostId:"",host:new HostModel,scanDialogText:"",isScanError:!1,keyFingerprints:[],submitButtonText:"Create Host"}},methods:{async loadHost(){let t=await axios.get("/api/hosts/"+this.host.hashId).catch(n=>{this.isLoading=!1;UiHelpers.showErrorToast("Error","",n.message);return});var n=t.data;this.host.name=n.name;this.host.host=n.host;this.host.port=n.port;this.host.userName=n.userName;this.host.password="";this.host.keyFingerprint=n.keyFingerprint;this.host.validate();this.isLoading=!1},async showScanDialog(){if(this.isScanError=!1,this.keyFingerprints=[],this.scanDialogText="Scanning host for fingerprint values using SHA-256 and MD5 algorithms...",$("#modal-scan-fingerprint").modal(),!this.host.validate()){this.isScanError=!0;this.scanDialogText="The captured host details are invalid - unable to scan for fingerprint.";return}axios.post("/api/hosts/scanfingerprint",this.host).then(n=>{this.scanDialogText="",this.keyFingerprints=n.data}).catch(n=>{var r,t,i;if(this.isScanError=!0,n.response&&n.response.data&&n.response.data.errorMessages){for(r=n.response.data.errorMessages,t="",i=0;i<r.length;i++)t=t+r[i]+"<br />";this.scanDialogText=t}else this.scanDialogText=n.message})},setKeyFingerPrint(n){this.host.keyFingerprint=n;$("#modal-scan-fingerprint").modal("toggle")},async submit(){if(this.isLoading=!0,$("#toastsContainerTopRight > .toast").remove(),!this.host.validate()){this.isLoading=!1;return}var n=this.isEdit?"/api/hosts/"+this.host.hashId:"/api/hosts";axios.post(n,this.host).then(()=>{window.location.href="/hosts"}).catch(n=>{var i,t;if(n.response&&n.response.data&&n.response.data.errorMessages)for(i=n.response.data.errorMessages,t=0;t<i.length;t++)UiHelpers.showErrorToast("Validation Error","",i[t]);else UiHelpers.showErrorToast("Validation Error","",n.message);this.isLoading=!1})}},mounted:function(){this.host.hashId=this.$el.parentElement.getAttribute("data-host-id");this.host.hashId!=""?(this.isEdit=!0,this.submitButtonText="Update Host",this.loadHost()):this.isLoading=!1}}).mount("#app-host");